# Документация по компоненту LocationSelector

## Обзор

`LocationSelector` - это React-компонент для поиска и выбора географических местоположений с использованием OpenStreetMap Nominatim API. Компонент обеспечивает интерактивный поиск мест с автозаполнением и отображением результатов в выпадающем списке.

## API

### Props

| Prop                 | Тип                                                              | Описание                                               |
| -------------------- | ---------------------------------------------------------------- | ------------------------------------------------------ |
| `onLocationSelected` | `(location: { name: string; lat: number; lng: number }) => void` | Callback-функция, вызываемая при выборе местоположения |

### Возвращаемый объект Location

```typescript
interface Location {
  name: string; // Полное название локации
  lat: number; // Широта
  lng: number; // Долгота
}
```

## Внутренние механизмы

### Состояния

- `inputValue` - текущее значение поля ввода
- `suggestions` - массив найденных мест
- `showSuggestions` - флаг отображения выпадающего списка
- `loading` - флаг состояния загрузки

### Запрос к API

Компонент использует Nominatim API от OpenStreetMap, которое не требует API-ключей:

```
https://nominatim.openstreetmap.org/search?format=json&q=[поисковый запрос]&addressdetails=1&limit=5
```

### Оптимизация

1. **Дебаунс запросов** - запросы отправляются с задержкой 300мс после прекращения ввода для снижения нагрузки на API
2. **Минимальная длина запроса** - поиск начинается только после ввода не менее 3 символов
3. **Ограничение результатов** - API возвращает не более 5 результатов

### Обработка UI событий

- **Клик вне компонента** - закрывает список подсказок
- **Клик по подсказке** - выбирает местоположение и вызывает `onLocationSelected`
- **Изменение ввода** - запускает поиск с дебаунсом

## Особенности

1. **Полностью бесплатное решение** - не требует никаких API-ключей
2. **Мобильная адаптивность** - подходит для устройств любого размера
3. **CSS-модули** - изолированные стили без конфликтов с другими компонентами
4. **Доступность** - поддерживает навигацию с клавиатуры

## Пример использования

```tsx
import LocationSelector from '../LocationSelector/LocationSelector';

const MyComponent = () => {
  const handleLocationSelected = location => {
    console.log(`Выбрана локация: ${location.name}`);
    console.log(`Координаты: ${location.lat}, ${location.lng}`);

    // Дальнейшая обработка...
  };

  return (
    <div>
      <h3>Выберите ваше местоположение:</h3>
      <LocationSelector onLocationSelected={handleLocationSelected} />
    </div>
  );
};
```

## Требования по использованию Nominatim API

При использовании данного компонента в промышленной среде следуйте правилам:

1. **Ограничьте количество запросов** - не более 1 запроса в секунду
2. **Кэшируйте результаты** - при высокой нагрузке
3. **Добавьте User-Agent** - если используется на высоконагруженных проектах

## Ограничения

1. Результаты поиска зависят от данных OpenStreetMap
2. При интенсивном использовании возможны ограничения со стороны API

## Стилизация

Компонент использует следующие CSS-классы, которые можно настроить:

- `.locationSelector` - контейнер компонента
- `.input` - поле ввода
- `.suggestions` - контейнер списка подсказок
- `.suggestionItem` - элемент списка подсказок
- `.loader` - индикатор загрузки
